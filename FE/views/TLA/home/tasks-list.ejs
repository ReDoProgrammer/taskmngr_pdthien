<div class="row">
    <div class="offset-md-9 col-md-3 text-right">
        <!-- Another variation with a button -->
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Search ..." />
            <div class="input-group-append">
                <button class="btn btn-warning" type="button">
                    <i class="fa fa-search text-danger"></i>
                </button>
            </div>
        </div>
    </div>
</div>


<div class="tableFixHead mt-1" id="tblDetail">
    <table class="table mt-1 table-striped bg-white text-dark">
        <thead class="thead-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Job</th>
                <th scope="col">Assigned date</th>
                <th scope="col">Deadline</th>
                <th scope="col">Staff</th>
                <th scope="col" class="text-center">Editor</th>
                <th scope="col" class="text-center">Q.A</th>
                <th scope="col" class="text-center">Status</th>
            </tr>
        </thead>
        <tbody id="tblLines">
        </tbody>
    </table>
</div>
<nav aria-label="...">
    <ul class="pagination pagination-sm">
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">1</a>
        </li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
    </ul>
</nav>

<script>
    var page = 1;
    var search = '';
    $(document).ready(function () {
        LoadTasksList();
    })

    function LoadTasksList() {
        $('#tblLines').empty();
        $.ajax({
            url: '/tla/task',
            type: 'get',
            headers: {
                authorization: "Bearer " + localStorage.getItem("accessToken"),
            },
            data: {
                search,
                page
            },
            success: function (data) {
                console.log(data);
                let idx = 1;
                data.tasks.forEach(t => {
                    // let tr = '<tr id="' + t._id + '">';
                    // tr += '<td>' + (idx++) + '</td>';
                    // tr += '<td>' + t.job.name + '</td>';
                    // tr += '<td>' + t.assigned_date + '</td>';
                    // tr += '<td>' + t.deadline + '</td>';
                    // tr += '<td>' + t.staff.fullname + '</td>';
                    // tr += '<td class="text-center">';
                    // if (t.editor) {
                    //     tr += '<i class="fa fa-check-square-o" aria-hidden="true"></i>';
                    // } else
                    //     tr += '<i class="fa fa-square-o" aria-hidden="true"></i>';
                    // tr += '</td>';

                    // tr += '<td class="text-center">';
                    // if (t.qa) {
                    //     tr += '<i class="fa fa-check-square-o" aria-hidden="true"></i>';
                    // } else
                    //     tr += '<i class="fa fa-square-o" aria-hidden="true"></i>';
                    // tr += '</td>';


                    // tr += '<td class ="font-italic text-info">';

                    // switch (t.status) {
                    //     case -1: tr += 'Initial';
                    //         break;
                    //     case 0: tr += 'Editing';
                    //         break;
                    //     case 1:
                    //         tr += 'Edited';
                    //         break;
                    //     case 2:
                    //         tr += 'Q.A ok!';
                    //         break;
                    //     case 3:
                    //         tr += 'DC ok!'
                    //         break;
                    //     case -3:
                    //         tr += 'DC rejected';
                    //         break;

                    // }
                    // tr += '</td>';

                    // tr += '</tr>';
                    // $('#tblLines').append(tr);
                })
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert(jqXHR.responseJSON.msg);
            }
        })
    }
</script>